<!DOCTYPE html>
<html lang="en">

<head>
	<title></title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="../js/vue.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/axios@0.12.0/dist/axios.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/lodash@4.13.1/lodash.min.js"></script>
</head>

<body>
	<div id="app">
		<div>{{ message }}</div>
		<div>{{ reversedMessage1 }}</div>
		<div>{{ reversedMessage2 }}</div>
		<div>{{ reversedMessage3()}}</div>
		<div>{{ reversedMessage4 }}</div>
		<p>
			Ask a yes/no question:
			<input v-model="question">
		</p>
		<p>{{ answer }}</p>
	</div>
	<script>
		var vm = new Vue({
			el: '#app',
			data: {
				message: 'hello',
				question: '',
				answer: 'I cannot give you an answer until you ask a question!'
			},
			computed: {
				reversedMessage1: function () {//写法一
					console.log(this);
					return this.message.split('').reverse().join('');
				},
				reversedMessage2() {//写法二
					console.log(this);
					return this.message.split('').reverse().join('');
				},
				reversedMessage4() {
					return this.reversedMessage1 + '999';
				}
			},
			methods: {
				reversedMessage3() {
					console.log(this);
					return this.message.split('').reverse().join('');
				},
				getAnswer: _.debounce(
					function () {
						if (this.question.indexOf('?') === -1) {
							this.answer = 'Questions usually contain a question mark. ;-)'
							return
						}
						this.answer = 'Thinking...'
						var vm = this
						axios.get('https://yesno.wtf/api')
							.then(function (response) {
								vm.answer = _.capitalize(response.data.answer)
							})
							.catch(function (error) {
								vm.answer = 'Error! Could not reach the API. ' + error
							})
					},
					// 这是我们为判定用户停止输入等待的毫秒数
					500
				)
			},
			watch: {
				// 如果 `question` 发生改变，这个函数就会运行
				question: function (newQuestion) {
					this.answer = 'Waiting for you to stop typing...'
					this.getAnswer()
				},
				reversedMessage1:function(){
					console.log('reversedMessage1发生了变化')
				}
			}
		});
	</script>
</body>

</html>